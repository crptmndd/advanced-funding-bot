# Funding Rate Arbitrage Bot

Софт для получения данных по фандинг рейтам с различных криптовалютных бирж. Первый этап большого проекта по арбитражу фандинг рейтов.

## Поддерживаемые биржи

| Биржа | Статус | Тип | Кол-во рынков |
|-------|--------|-----|---------------|
| Binance | ✅ Работает | CEX | ~580 |
| Bybit | ✅ Работает | CEX | ~610 |
| Gate.io | ✅ Работает | CEX | ~600 |
| MEXC | ✅ Работает | CEX | ~820 |
| OKX | ✅ Работает | CEX | ~260 |
| Bitget | ✅ Работает | CEX | ~590 |
| BingX | ✅ Работает | CEX | ~570 |
| Hyperliquid | ✅ Работает | DEX | ~240 |
| Hibachi | ✅ Работает | DEX | ~14 |

**Всего:** 9 бирж, ~3000+ фандинг рейтов

## Установка

```bash
# Клонирование репозитория
git clone <repo-url>
cd funding-bot

# Создание виртуального окружения
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows

# Установка зависимостей
pip install -r requirements.txt
```

## Использование

### Получение данных со всех бирж

```bash
python -m src.main
```

### Получение данных с конкретных бирж

```bash
python -m src.main -e bybit okx gate binance
# или
python -m src.main --exchanges bybit mexc bitget
```

### Показать топ N рейтов

```bash
python -m src.main --top 20
```

### Список доступных бирж

```bash
python -m src.main --list-exchanges
```

### Получить фандинг для конкретного символа

```bash
python -m src.main --symbol "BTC/USDT:USDT"
```

### Verbose режим

```bash
python -m src.main -v
```

## Структура проекта

```
funding-bot/
├── src/
│   ├── __init__.py
│   ├── __main__.py
│   ├── main.py              # CLI интерфейс
│   ├── exchanges/
│   │   ├── __init__.py
│   │   ├── base.py          # Базовый класс для бирж
│   │   ├── ccxt_exchange.py # CCXT реализации (Binance, Bybit, OKX, etc.)
│   │   ├── gate_direct.py   # Gate.io через прямой API
│   │   ├── hyperliquid.py   # Hyperliquid DEX
│   │   └── registry.py      # Реестр бирж
│   ├── models/
│   │   ├── __init__.py
│   │   └── funding_rate.py  # Модели данных
│   └── utils/
│       ├── __init__.py
│       └── logger.py        # Логирование
├── requirements.txt
└── README.md
```

## Пример вывода

```
╭────────────────────────────────── Summary ───────────────────────────────────╮
│ Total rates collected: 3089 from 9 exchanges                                 │
╰──────────────────────────────────────────────────────────────────────────────╯

🔺 Top 5 Positive Funding Rates (Long pays Short)
┏━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┓
┃ Symbol          ┃ Exchange     ┃ Rate (%) ┃ Annualized (%) ┃ Mark Price ┃
┡━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━┩
│ FLOW/USDT:USDT  │ gate         │ +0.5319% │       +582.56% │      $0.10 │
│ FOGO/USDT:USDT  │ mexc         │ +0.2918% │       +319.52% │      $0.05 │
│ DAM/USDT:USDT   │ gate         │ +0.2529% │       +277.05% │      $0.03 │
└─────────────────┴──────────────┴──────────┴────────────────┴────────────┘

🔻 Top 5 Negative Funding Rates (Short pays Long)
┏━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━┓
┃ Symbol          ┃ Exchange     ┃ Rate (%) ┃ Annualized (%) ┃ Mark Price ┃
┡━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━┩
│ ICNT/USDT:USDT  │ bitget       │ -0.8081% │       -884.87% │      $0.48 │
│ ICNT/USDT:USDT  │ binance      │ -0.7774% │       -851.25% │      $0.48 │
│ MOVE/USDT:USDT  │ bitget       │ -0.7087% │       -776.03% │      $0.04 │
└─────────────────┴──────────────┴──────────┴────────────────┴────────────┘
```

## Арбитражные возможности

Софт позволяет находить арбитражные возможности между биржами:

- **Положительный фандинг** (Long платит Short): можно шортить на этой бирже
- **Отрицательный фандинг** (Short платит Long): можно лонгить на этой бирже

**Пример арбитража:**
- ICNT/USDT на Bitget: -0.81% (шорты платят)
- ICNT/USDT на другой бирже: +0.05% (лонги платят)
- **Спред:** ~0.86% за 8 часов = ~940% годовых потенциальная прибыль

## Roadmap

### Фаза 1: Сбор данных ✅
- [x] Получение фандинг рейтов с 9 бирж (CEX + DEX)
- [x] CLI интерфейс с аргументами
- [x] Отображение цен для всех монет
- [x] Поддержка Binance, Hibachi

### Фаза 2: Аналитика
- [ ] Автоматический поиск арбитражных возможностей
- [ ] Расчет потенциальной прибыли с учётом комиссий
- [ ] Фильтрация по ликвидности
- [ ] Уведомления о возможностях

### Фаза 3: Телеграм бот
- [ ] Интеграция с Telegram
- [ ] Система подписок
- [ ] Управление настройками через бота
- [ ] Алерты в реальном времени

### Фаза 4: Автоматизация
- [ ] Создание EVM кошельков для пользователей
- [ ] Автоматический вывод средств на биржи
- [ ] Выполнение арбитражных сделок
- [ ] Сбор баланса при отсутствии возможностей

## API Документация

Используемые API:
- CCXT Library: https://docs.ccxt.com
- Gate.io API v4: https://www.gate.io/docs/developers/apiv4
- Hibachi: https://docs.ccxt.com/exchanges/hibachi
- Binance Futures: https://docs.ccxt.com/exchanges/binance

## Лицензия

MIT
